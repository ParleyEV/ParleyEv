<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <title>Nflev - ParleyEv</title>
    <style>
        :root {
            --bg: #0a0a0a;
            --card: #1a1a1a;
            --accent:#ff6b00; 
            --text: #e0e0e0;
            --gray: #404040;
            --danger: #ff4444;
            --success: #00ff88;
        }

        body { 
    background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('../img/nfl.jpg');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    color: var(--text); 
    font-family: 'Segoe UI', sans-serif; 
    margin: 0;
    padding: 20px; 
    display: flex; 
    justify-content: center; 
    min-height: 100vh;
}
        .container { width: 100%; max-width: 550px; }
        .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid var(--accent); padding-bottom: 10px; }
        .header h1 { margin: 0; color: var(--accent); text-transform: uppercase; letter-spacing: 2px; }
        .card { 
    background: rgba(26, 26, 26, 0.65) !important; 
    backdrop-filter: blur(10px);
    padding: 15px; 
    border-radius: 12px; 
    margin-bottom: 15px; 
    border: 1px solid rgba(255,255,255,0.1); 
}
        label { display: block; font-size: 0.7rem; color: var(--accent); text-transform: uppercase; margin-bottom: 5px; font-weight: bold; }
        select, input { width: 100%; background: #252525; border: 1px solid var(--gray); color: white; padding: 10px; border-radius: 6px; margin-bottom: 12px; box-sizing: border-box; outline: none; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .btn-analyze { width: 100%; padding: 18px; background: var(--accent); color: white; border: none; border-radius: 8px; font-weight: 800; cursor: pointer; text-transform: uppercase; box-shadow: 0 4px 15px rgba(0, 76, 255, 0.3); }
        
        .result-card { background: #000; border: 1px solid var(--accent); padding: 20px; border-radius: 12px; margin-top: 20px; animation: fadeIn 0.5s ease; }
        .comparison-box { font-size: 0.85em; background: #111; padding: 15px; border-radius: 8px; margin-bottom: 12px; border-left: 4px solid var(--gray); }
        .comparison-box.winner { border-left-color: var(--success); background: rgba(0, 255, 136, 0.05); }
        
        .stat-row { display: flex; justify-content: space-between; margin-bottom: 5px; }
        .stat-label { color: #888; }
        .stat-value { font-weight: bold; color: #fff; }
        .edge-value { color: var(--success); font-weight: 900; }

        .btn-copy { width: 100%; padding: 12px; background: #333; color: var(--accent); border: 1px solid var(--accent); border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 15px; text-transform: uppercase; transition: 0.3s; }
        .btn-copy:hover { background: var(--accent); color: white; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

         .program-title {
    text-align: center; 
    font-size: 2.2rem; 
    font-weight: 900; 
    margin-bottom: 25px;
    text-transform: uppercase; 
    letter-spacing: 1px; 
    color: #ffffff;
}
.program-title span { color: var(--accent); }
.program-title i { margin-right: 15px; color: var(--accent); }

/* CONTENEDOR DE BOTONES */
.footer-links { 
    display: flex; 
    flex-direction: column; 
    gap: 10px; 
    margin-top: 20px;
    width: 100%; /* Obliga a que se ajuste al contenedor */
    padding: 0;   /* Quita paddings que puedan empujar los botones */
    box-sizing: border-box; /* Asegura que el borde no sume ancho extra */
}

.btn-link { 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    gap: 8px;
    width: 100%; 
    padding: 14px; 
    border-radius: 8px; 
    font-weight: 700; 
    font-size: 0.85rem; 
    text-decoration: none; 
    text-transform: uppercase;
    transition: 0.3s; 
    border: 2px solid transparent;
    box-sizing: border-box;
}

/* COLORES INDIVIDUALES */
.btn-triunfo { border-color: #ffcc00; color: #ffffff; background: rgba(255, 204, 0, 0.15); }
.btn-tg { border-color: #0088cc; color: #ffffff; background: rgba(0, 136, 204, 0.15); }
.btn-ig { border-color: #E1306C; color: #ffffff; background: rgba(225, 48, 108, 0.15); }
.btn-contact { border-color: #ff6b00; color: #ffffff; background: rgba(255, 107, 0, 0.15); }

/* EFECTO AL PASAR EL MOUSE */
.btn-link:hover { transform: scale(1.02); background: rgba(255,255,255,0.1); }

    </style>
</head>
<body>

<div class="container">
    <h1 class="program-title"><i class="fas fa-football"></i>NFL<span>EV</span></h1>

    <div class="card">
        <label>Banca Total</label>
        <input type="number" id="bankroll" value="100">
    </div>

    <div class="card" style="border-top: 3px solid var(--accent);">
        <label>Equipo Local</label>
        <input type="text" id="t1_name" placeholder="Ej: Chiefs">
        <div class="grid">
            <div>
                <label>Jerarquía (Tier)</label>
                <select id="t1_tier">
                    <option value="100">Super Bowl Contender</option>
                    <option value="75">Playoff Lock</option>
                    <option value="50">Average Team</option>
                    <option value="20">Bottom Feeder</option>
                </select>
            </div>
            <div>
                <label>Condición Domo/Clima</label>
                <select id="t1_clima">
                    <option value="1.05">Domo / Clima Ideal</option>
                    <option value="1.00" selected>Normal</option>
                    <option value="0.95">Mal Clima (Viento/Nieve)</option>
                </select>
            </div>
        </div>
        <div class="grid">
            <div>
                <label>QB Status</label>
                <select id="t1_qb">
                    <option value="1.0">Titular Elite/Sólido</option>
                    <option value="0.85">Backup / QB Lesionado</option>
                </select>
            </div>
            <div><label>PPG (Puntos x Juego)</label><input type="number" id="t1_off" value="24"></div>
        </div>
        <label>Momio Americano</label>
        <input type="number" id="m1_us" placeholder="-110">
    </div>

    <div class="card" style="border-top: 3px solid #555;">
        <label>Equipo Visitante</label>
        <input type="text" id="t2_name" placeholder="Ej: Eagles">
        <div class="grid">
            <div>
                <label>Jerarquía (Tier)</label>
                <select id="t2_tier">
                    <option value="100">Super Bowl Contender</option>
                    <option value="75">Playoff Lock</option>
                    <option value="50">Average Team</option>
                    <option value="20" selected>Bottom Feeder</option>
                </select>
            </div>
            <div>
                <label>Viaje / Distancia</label>
                <select id="t2_travel">
                    <option value="1.00" selected>Corta (Misma Conf.)</option>
                    <option value="0.97">Larga (Costa a Costa)</option>
                </select>
            </div>
        </div>
        <div class="grid">
            <div>
                <label>QB Status</label>
                <select id="t2_qb">
                    <option value="1.0">Titular Elite/Sólido</option>
                    <option value="0.85">Backup / QB Lesionado</option>
                </select>
            </div>
            <div><label>PPG (Puntos x Juego)</label><input type="number" id="t2_off" value="24"></div>
        </div>
        <label>Momio Americano</label>
        <input type="number" id="m2_us" placeholder="+110">
    </div>

    <button class="btn-analyze" onclick="calculateEV()">Iniciar Analisis Pro</button>
    <div id="resultArea"></div>

    <div class="footer-links">
        <a href="https://t.me/parleyevapp" target="_blank" class="btn-link btn-contact">
            <i class="fas fa-headset"></i> Soporte Pro
        </a>
        <a href="https://triunfobet.com/register?r=TRI12603362" target="_blank" class="btn-link btn-triunfo">
            <i class="fas fa-gift"></i> Bono en TriunfoBet
        </a>
        <a href="https://t.me/parleyev" target="_blank" class="btn-link btn-tg">
            <i class="fab fa-telegram-plane"></i> Canal de Pronósticos
        </a>
        <a href="https://instagram.com/parleyevapp" target="_blank" class="btn-link btn-ig">
            <i class="fab fa-instagram"></i> Instagram
        </a>
    </div>

</div>

<script>
    const inputIds = ['bankroll', 't1_name', 't1_tier', 't1_clima', 't1_qb', 't1_off', 'm1_us', 't2_name', 't2_tier', 't2_travel', 't2_qb', 't2_off', 'm2_us'];

    function saveData() { 
        inputIds.forEach(id => { 
            const el = document.getElementById(id); 
            localStorage.setItem('nflev_pro_' + id, el.value); 
        }); 
    }

    function loadData() { 
        inputIds.forEach(id => { 
            const saved = localStorage.getItem('nflev_pro_' + id); 
            if (saved !== null) document.getElementById(id).value = saved; 
        }); 
    }

    document.querySelectorAll('input, select').forEach(el => el.addEventListener('input', saveData));
    window.onload = loadData;

    function usToDec(us) { return us > 0 ? (us/100)+1 : (100/Math.abs(us))+1; }
    function getCasinoProb(us) { return us > 0 ? (100/(us+100))*100 : (Math.abs(us)/(Math.abs(us)+100))*100; }

    let currentReport = "";

    function calculateEV() {
        const bank = parseFloat(document.getElementById('bankroll').value);
        const m1 = parseFloat(document.getElementById('m1_us').value);
        const m2 = parseFloat(document.getElementById('m2_us').value);

        if(isNaN(m1) || isNaN(m2)) { alert("Ingresa los momios."); return; }

        const t1 = { name: document.getElementById('t1_name').value || "Local", tier: parseFloat(document.getElementById('t1_tier').value), clima: parseFloat(document.getElementById('t1_clima').value), qb: parseFloat(document.getElementById('t1_qb').value), off: parseFloat(document.getElementById('t1_off').value), odd: usToDec(m1), cProb: getCasinoProb(m1) };
        const t2 = { name: document.getElementById('t2_name').value || "Visitante", tier: parseFloat(document.getElementById('t2_tier').value), travel: parseFloat(document.getElementById('t2_travel').value), qb: parseFloat(document.getElementById('t2_qb').value), off: parseFloat(document.getElementById('t2_off').value), odd: usToDec(m2), cProb: getCasinoProb(m2) };

        // Lógica de Jerarquía NFL
        let t1B = t1.tier - t2.tier >= 50 ? 1.25 : 1;
        let t2B = t2.tier - t1.tier >= 50 ? 1.25 : 1;

        // NFL Home Advantage Factor
        const homeAdv = 1.05;

        const p1 = (t1.off * Math.sqrt(t1.tier)) * homeAdv * t1.clima * t1.qb * t1B;
        const p2 = (t2.off * Math.sqrt(t2.tier)) * t2.travel * t2.qb * t2B;

        const prob1 = (p1 / (p1 + p2)) * 100;
        const prob2 = 100 - prob1;

        const ev1 = ((prob1/100) * t1.odd) - 1;
        const ev2 = ((prob2/100) * t2.odd) - 1;

        const edge1 = prob1 - t1.cProb;
        const edge2 = prob2 - t2.cProb;

        let resHtml = `<div class="result-card">
            <h3 style="color:var(--accent); text-align:center; margin-bottom:15px; letter-spacing:1px;">ANALISIS NFLEV</h3>
            
            <div class="comparison-box ${ev1 > 0 ? 'winner' : ''}">
                <div style="font-weight:bold; color:var(--accent); margin-bottom:8px;">LOCAL: ${t1.name.toUpperCase()}</div>
                <div class="stat-row"><span class="stat-label">Prob. Real:</span><span class="stat-value">${prob1.toFixed(1)}%</span></div>
                <div class="stat-row"><span class="stat-label">Prob. Casa:</span><span class="stat-value">${t1.cProb.toFixed(1)}%</span></div>
                <div class="stat-row"><span class="stat-label">Edge (Ventaja):</span><span class="edge-value" style="color:${edge1 > 0 ? 'var(--success)' : 'var(--danger)'}">${edge1 > 0 ? '+' : ''}${edge1.toFixed(1)}%</span></div>
            </div>

            <div class="comparison-box ${ev2 > 0 ? 'winner' : ''}">
                <div style="font-weight:bold; color:#aaa; margin-bottom:8px;">VISITANTE: ${t2.name.toUpperCase()}</div>
                <div class="stat-row"><span class="stat-label">Prob. Real:</span><span class="stat-value">${prob2.toFixed(1)}%</span></div>
                <div class="stat-row"><span class="stat-label">Prob. Casa:</span><span class="stat-value">${t2.cProb.toFixed(1)}%</span></div>
                <div class="stat-row"><span class="stat-label">Edge (Ventaja):</span><span class="edge-value" style="color:${edge2 > 0 ? 'var(--success)' : 'var(--danger)'}">${edge2 > 0 ? '+' : ''}${edge2.toFixed(1)}%</span></div>
            </div>`;

        let best = ev1 > ev2 ? t1 : t2;
        let bestEV = ev1 > ev2 ? ev1 : ev2;

        if (bestEV > 0) {
            const stake = (bank * (bestEV / (best.odd - 1)) / 10).toFixed(2);
            resHtml += `<div style="text-align:center; background:var(--accent); color:white; padding:15px; border-radius:8px; margin-top:10px;">
                <div style="font-size:1.0rem; font-weight:bold; opacity:0.9;">OPORTUNIDAD DETECTADA</div>
                <div style="font-size:1.0rem; font-weight:900;">PICK: ${best.name.toUpperCase()}</div>
                <div style="font-size:1.0rem; font-weight:bold; margin-top:5px;">STAKE SUGERIDO: ${stake}</div>
            </div>`;
            
            currentReport = `AUDITORIA DE PARLEY EV NFL\n` +
                            `━━━━━━━━━━━━━━━━━━\n` +
                            `LOCAL: ${t1.name} vs VISITANTE: ${t2.name}\n\n` +
                            `PROBABILIDADES Y DIFERENCIAL:\n` +
                            `• ${t1.name}:\n` +
                            `  Real: ${prob1.toFixed(1)}% | Casa: ${t1.cProb.toFixed(1)}%\n` +
                            `  Diferencial: ${edge1 > 0 ? '+' : ''}${edge1.toFixed(1)}%\n\n` +
                            `• ${t2.name}:\n` +
                            `  Real: ${prob2.toFixed(1)}% | Casa: ${t2.cProb.toFixed(1)}%\n` +
                            `  Diferencial: ${edge2 > 0 ? '+' : ''}${edge2.toFixed(1)}%\n\n` +
                            `PICK: ${best.name.toUpperCase()}\n` +
                            `STAKE: ${stake}\n` +
                            `BANKROLL: ${bank}\n` +
                            `━━━━━━━━━━━━━━━━━━`;
        } else {
            resHtml += `<div style="text-align:center; color:var(--danger); padding:10px; font-weight:bold;">SIN VALOR (EV NEGATIVO)</div>`;
            currentReport = `AUDITORIA DE PARLEY EV NFL\n━━━━━━━━━━━━━━━━━━\n${t1.name} vs ${t2.name}\n\nNo se detectó ventaja matemática sobre la casa.\n━━━━━━━━━━━━━━━━━━`;
        }

        resHtml += `<button id="btnCopy" class="btn-copy" onclick="copyReport()">Copiar Reporte Pro</button></div>`;
        document.getElementById('resultArea').innerHTML = resHtml;
    }

    function copyReport() {
        navigator.clipboard.writeText(currentReport);
        const btn = document.getElementById('btnCopy');
        const originalText = btn.innerText;
        btn.innerText = "REPORTE COPIADO";
        setTimeout(() => { 
            btn.innerText = originalText; 
        }, 2000);
    }
</script>
</body>
</html>